{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"50678696-ed6f097088bf5690dd98584b9\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\nexport function getImagesByQuery(query, page = 1) {\n  const per_page = 15;\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page: page,\n    per_page: per_page,\n  };\n\n  return axios\n    .get(BASE_URL, { params })\n    .then((response) => response.data)\n    .catch((error) => {\n      console.error(\"Error fetching images:\", error);\n      throw new Error(\"Failed to fetch images from Pixabay.\");\n    });\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst myGallery = document.querySelector(\".gallery\");\nconst myLoadMoreButton = document.querySelector(\".buttonLoadMore\");\n\nlet myLightbox = new SimpleLightbox(\".gallery-link\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n  captionPosition: \"bottom\",\n});\n\nexport function createGallery(images) {\n  function galleryItemInsertion({\n    webformatURL,\n    largeImageURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  }) {\n    return `<li class=\"gallery-item\">\n        <div class=\"gallery-item-container\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"\n          /></a>\n          <div class=\"image-info\">\n            <div class=\"image-info-container\">\n              <b>Likes</b>\n              <p>${likes}</p>\n              </div>\n            <div class=\"image-info-container\">\n              <b>Views</b>\n              <p>${views}</p>\n                </div>\n            <div class=\"image-info-container\">\n              <b>Comments</b>\n              <p>${comments}</p>\n                </div>\n            <div class=\"image-info-container\">\n              <b>Downloads</b>\n              <p>${downloads}</p>\n                </div>\n          </div>\n        </div>\n        </li>`;\n  }\n  const newGallerySyntax = images.map(galleryItemInsertion).join(\"\");\n  myGallery.insertAdjacentHTML(\"beforeend\", newGallerySyntax);\n\n  myLightbox.refresh();\n}\n\nexport function clearGallery() {\n  myGallery.innerHTML = \"\";\n}\nexport function showLoader() {\n  const myLoader = document.querySelector(\".loader\");\n  myLoader.classList.remove(\"visuallyhidden\");\n}\nexport function hideLoader() {\n  const myLoader = document.querySelector(\".loader\");\n  myLoader.classList.add(\"visuallyhidden\");\n}\n\nexport function showLoadMoreButton() {\n  myLoadMoreButton.classList.remove(\"visuallyhidden\");\n}\nexport function hideLoadMoreButton() {\n  myLoadMoreButton.classList.add(\"visuallyhidden\");\n}\n","import { getImagesByQuery } from \"./js/pixabay-api.js\";\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from \"./js/render-functions.js\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet page = 1;\nconst imagesPerPage = 15;\nlet myTotalHits = 0;\nhideLoadMoreButton(); //           hide button during page loading\n\nconst myForm = document.querySelector(\".form\");\nconst searchImage = document.querySelector('input[name=\"search-text\"]');\nconst myLoadMoreButton = document.querySelector(\".buttonLoadMore\");\nlet myQuery;\n\nmyForm.reset();\n\nmyForm.addEventListener(\"submit\", onSubmit);\nasync function onSubmit(event) {\n  event.preventDefault();\n  myQuery = searchImage.value.trim();\n  if (myQuery === \"\") {\n    myForm.reset();\n    iziToast.error({\n      title: \"Error\",\n      message: \"Search field cannot be empty!\",\n      position: \"topRight\",\n    });\n    return;\n  }\n  clearGallery();\n  showLoader();\n\n  try {\n    page = 1;\n    myTotalHits = 0;\n\n    let myData = await getImagesByQuery(myQuery, page);\n\n    myTotalHits = myData.total;\n\n    if (myTotalHits === 0) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message:\n          \"‚ùå Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n        icon: false,\n        close: false,\n        backgroundColor: \"#ef4040\",\n        maxWidth: \"432px\",\n        minHeight: \"88px\",\n        html: true,\n      });\n    } else {\n      createGallery(myData.hits);\n      if (page * imagesPerPage < myTotalHits) {\n        showLoadMoreButton();\n      } else {\n        hideLoadMoreButton();\n      }\n    }\n    myForm.reset();\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message:\n        error.message ||\n        \"An error occurred while fetching images. Please try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    hideLoader();\n  }\n}\n\nmyLoadMoreButton.addEventListener(\"click\", onCLickLoadMore);\n\nasync function onCLickLoadMore() {\n  page += 1;\n\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const newImages = await getImagesByQuery(myQuery, page);\n\n    createGallery(newImages.hits);\n\n    if (page * imagesPerPage < myTotalHits) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"rgba(255, 106, 0, 0.95)\",\n        maxWidth: \"432px\",\n        minHeight: \"88px\",\n        padding: \"20px\",\n        color: \"#ffffff\",\n        html: true,\n      });\n    }\n    scrollToNextGroup();\n  } catch (error) {\n    iziToast.error({\n      title: \"Error\",\n      message:\n        error.message ||\n        \"An error occurred while loading more images. Please try again later.\",\n      position: \"topRight\",\n      backgroundColor: \"rgba(239, 64, 64, 0.8)\",\n      maxWidth: \"432px\",\n      minHeight: \"88px\",\n      padding: \"20px\",\n    });\n  } finally {\n    hideLoader();\n    myLoadMoreButton.blur();\n  }\n}\n\nfunction scrollToNextGroup() {\n  const galleryItem = document.querySelector(\".gallery-item\");\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({\n      top: itemHeight * 2,\n      behavior: \"smooth\",\n    });\n  }\n}\n"],"names":["API_KEY","BASE_URL","getImagesByQuery","query","page","params","axios","response","error","myGallery","myLoadMoreButton","myLightbox","SimpleLightbox","createGallery","images","galleryItemInsertion","webformatURL","largeImageURL","tags","likes","views","comments","downloads","newGallerySyntax","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","imagesPerPage","myTotalHits","myForm","searchImage","myQuery","onSubmit","event","iziToast","myData","onCLickLoadMore","newImages","scrollToNextGroup","galleryItem","itemHeight"],"mappings":"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"}